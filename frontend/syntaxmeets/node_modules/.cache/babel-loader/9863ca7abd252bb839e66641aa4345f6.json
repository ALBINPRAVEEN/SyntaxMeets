{"ast":null,"code":"!function (t, i) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = i() : \"function\" == typeof define && define.amd ? define([], i) : \"object\" == typeof exports ? exports[\"responsive-sketchpad\"] = i() : t.Sketchpad = i();\n}(window, function () {\n  return function (t) {\n    var i = {};\n\n    function e(n) {\n      if (i[n]) return i[n].exports;\n      var o = i[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return t[n].call(o.exports, o, o.exports, e), o.l = !0, o.exports;\n    }\n\n    return e.m = t, e.c = i, e.d = function (t, i, n) {\n      e.o(t, i) || Object.defineProperty(t, i, {\n        enumerable: !0,\n        get: n\n      });\n    }, e.r = function (t) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n    }, e.t = function (t, i) {\n      if (1 & i && (t = e(t)), 8 & i) return t;\n      if (4 & i && \"object\" == typeof t && t && t.__esModule) return t;\n      var n = Object.create(null);\n      if (e.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: t\n      }), 2 & i && \"string\" != typeof t) for (var o in t) e.d(n, o, function (i) {\n        return t[i];\n      }.bind(null, o));\n      return n;\n    }, e.n = function (t) {\n      var i = t && t.__esModule ? function () {\n        return t.default;\n      } : function () {\n        return t;\n      };\n      return e.d(i, \"a\", i), i;\n    }, e.o = function (t, i) {\n      return Object.prototype.hasOwnProperty.call(t, i);\n    }, e.p = \"\", e(e.s = 0);\n  }([function (t, i, e) {\n    \"use strict\";\n\n    Object.defineProperty(i, \"__esModule\", {\n      value: !0\n    });\n\n    var n = function () {\n      function t(t, i) {\n        if (this.sketching = !1, this._strokes = [], this.undoneStrokes = [], this.readOnly = !1, this.aspectRatio = 1, this.lineWidth = 5, this.lineColor = \"#000\", this.lineCap = \"round\", this.lineJoin = \"round\", this.lineMiterLimit = 10, null == t) throw new Error(\"Must pass in a container element\");\n        null != i && this.setOptions(i), this.canvas = document.createElement(\"canvas\"), this.ctx = this.canvas.getContext(\"2d\");\n        var e = (null == i ? void 0 : i.width) || t.clientWidth,\n            n = (null == i ? void 0 : i.height) || e * this.aspectRatio;\n        this.setCanvasSize(e, n), t.appendChild(this.canvas), this._strokes.length > 0 && this.redraw(), this.listen();\n      }\n\n      return Object.defineProperty(t.prototype, \"strokes\", {\n        get: function () {\n          return this._strokes.map(function (t) {\n            return t.toObj();\n          });\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"undos\", {\n        get: function () {\n          return this.undoneStrokes.map(function (t) {\n            return t.toObj();\n          });\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"opts\", {\n        get: function () {\n          return {\n            backgroundColor: this.backgroundColor,\n            readOnly: this.readOnly,\n            width: this.canvas.width,\n            height: this.canvas.height,\n            aspectRatio: this.canvas.width / this.canvas.height,\n            line: {\n              size: this.lineWidth,\n              color: this.lineColor,\n              cap: this.lineCap,\n              join: this.lineJoin,\n              miterLimit: this.lineMiterLimit\n            }\n          };\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.toJSON = function () {\n        return {\n          aspectRatio: this.canvas.width / this.canvas.height,\n          strokes: this.strokes\n        };\n      }, t.prototype.loadJSON = function (t) {\n        var i = t.strokes || [];\n        this._strokes = i.map(function (t) {\n          return s.fromObj(t);\n        }), this.redraw();\n      }, t.prototype.toDataURL = function (t) {\n        return this.canvas.toDataURL(t);\n      }, t.prototype.setCanvasSize = function (t, i) {\n        this.canvas.setAttribute(\"width\", t.toString()), this.canvas.setAttribute(\"height\", i.toString()), this.canvas.style.width = t + \"px\", this.canvas.style.height = i + \"px\";\n      }, t.prototype.getCanvasSize = function () {\n        return {\n          width: this.canvas.width,\n          height: this.canvas.height\n        };\n      }, t.prototype.setLineWidth = function (t) {\n        this.lineWidth = t;\n      }, t.prototype.setLineSize = function (t) {\n        this.lineWidth = t;\n      }, t.prototype.setLineColor = function (t) {\n        this.lineColor = t;\n      }, t.prototype.setReadOnly = function (t) {\n        this.readOnly = t;\n      }, t.prototype.undo = function () {\n        0 !== this._strokes.length && (this.undoneStrokes.push(this._strokes.pop()), this.redraw());\n      }, t.prototype.redo = function () {\n        0 !== this.undoneStrokes.length && (this._strokes.push(this.undoneStrokes.pop()), this.redraw());\n      }, t.prototype.clear = function () {\n        this.undoneStrokes = [], this._strokes = [], this.redraw();\n      }, t.prototype.drawLine = function (t, i, e) {\n        this.setOptions({\n          line: e\n        }), t = this.getPointRelativeToCanvas(new r(t.x, t.y)), i = this.getPointRelativeToCanvas(new r(i.x, i.y)), this.pushStroke([t, i]), this.redraw();\n      }, t.prototype.resize = function (t) {\n        var i = t * this.aspectRatio;\n        this.lineWidth = this.lineWidth * (t / this.canvas.width), this.setCanvasSize(t, i), this.redraw();\n      }, t.prototype.getPointRelativeToCanvas = function (t) {\n        return {\n          x: t.x / this.canvas.width,\n          y: t.y / this.canvas.height\n        };\n      }, t.prototype.getLineSizeRelativeToCanvas = function (t) {\n        return t / this.canvas.width;\n      }, t.prototype.setOptions = function (t) {\n        var i, e, n, o, r, a;\n        t.backgroundColor && (this.backgroundColor = t.backgroundColor), (null === (i = t.line) || void 0 === i ? void 0 : i.size) && (this.lineWidth = t.line.size), (null === (e = t.line) || void 0 === e ? void 0 : e.cap) && (this.lineCap = t.line.cap), (null === (n = t.line) || void 0 === n ? void 0 : n.join) && (this.lineJoin = t.line.join), (null === (o = t.line) || void 0 === o ? void 0 : o.miterLimit) && (this.lineMiterLimit = t.line.miterLimit), t.aspectRatio && (this.aspectRatio = t.aspectRatio), t.data && (this._strokes = null !== (a = null === (r = t.data.strokes) || void 0 === r ? void 0 : r.map(function (t) {\n          return s.fromObj(t);\n        })) && void 0 !== a ? a : []), t.onDrawEnd && (this.onDrawEnd = t.onDrawEnd);\n      }, t.prototype.getCursorRelativeToCanvas = function (t) {\n        var i,\n            e = this.canvas.getBoundingClientRect();\n\n        if (o(t)) {\n          var n = t;\n          i = new r(n.touches[0].clientX - e.left, n.touches[0].clientY - e.top);\n        } else {\n          var s = t;\n          i = new r(s.clientX - e.left, s.clientY - e.top);\n        }\n\n        return new r(i.x / this.canvas.width, i.y / this.canvas.height);\n      }, t.prototype.normalizePoint = function (t) {\n        return new r(t.x * this.canvas.width, t.y * this.canvas.height);\n      }, t.prototype.getLineWidthRelativeToCanvas = function (t) {\n        return t / this.canvas.width;\n      }, t.prototype.normalizeLineWidth = function (t) {\n        return t * this.canvas.width;\n      }, t.prototype.clearCanvas = function () {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.backgroundColor && (this.ctx.fillStyle = this.backgroundColor, this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height));\n      }, t.prototype.drawStroke = function (t) {\n        if (null != t.points) {\n          this.ctx.beginPath();\n\n          for (var i = 0; i < t.points.length - 1; i++) {\n            var e = this.normalizePoint(t.points[i]),\n                n = this.normalizePoint(t.points[i + 1]);\n            this.ctx.moveTo(e.x, e.y), this.ctx.lineTo(n.x, n.y);\n          }\n\n          this.ctx.closePath(), t.color && (this.ctx.strokeStyle = t.color), t.width && (this.ctx.lineWidth = this.normalizeLineWidth(t.width)), t.join && (this.ctx.lineJoin = t.join), t.cap && (this.ctx.lineCap = t.cap), t.miterLimit && (this.ctx.miterLimit = t.miterLimit), this.ctx.stroke();\n        }\n      }, t.prototype.pushStroke = function (t) {\n        this._strokes.push(s.fromObj({\n          points: t,\n          size: this.getLineWidthRelativeToCanvas(this.lineWidth),\n          color: this.lineColor,\n          cap: this.lineCap,\n          join: this.lineJoin,\n          miterLimit: this.lineMiterLimit\n        }));\n      }, t.prototype.pushPoint = function (t) {\n        var i = this._strokes[this._strokes.length - 1];\n        i.points && i.points.push(t);\n      }, t.prototype.redraw = function () {\n        var t = this;\n        this.clearCanvas(), this._strokes.forEach(function (i) {\n          return t.drawStroke(i);\n        });\n      }, t.prototype.listen = function () {\n        var t = this;\n        [\"mousedown\", \"touchstart\"].forEach(function (i) {\n          return t.canvas.addEventListener(i, function (i) {\n            return t.startStrokeHandler(i);\n          });\n        }), [\"mousemove\", \"touchmove\"].forEach(function (i) {\n          return t.canvas.addEventListener(i, function (i) {\n            return t.drawStrokeHandler(i);\n          });\n        }), [\"mouseup\", \"mouseleave\", \"touchend\"].forEach(function (i) {\n          return t.canvas.addEventListener(i, function (i) {\n            return t.endStrokeHandler(i);\n          });\n        });\n      }, t.prototype.startStrokeHandler = function (t) {\n        if (t.preventDefault(), !this.readOnly) {\n          this.sketching = !0;\n          var i = this.getCursorRelativeToCanvas(t);\n          this.pushStroke([i]), this.redraw();\n        }\n      }, t.prototype.drawStrokeHandler = function (t) {\n        if (t.preventDefault(), this.sketching) {\n          var i = this.getCursorRelativeToCanvas(t);\n          this.pushPoint(i), this.redraw();\n        }\n      }, t.prototype.endStrokeHandler = function (t) {\n        if (t.preventDefault(), this.sketching && (this.sketching = !1, !o(t))) {\n          var i = this.getCursorRelativeToCanvas(t);\n          this.pushPoint(i), this.redraw(), this.onDrawEnd && this.onDrawEnd();\n        }\n      }, t;\n    }();\n\n    function o(t) {\n      return -1 !== t.type.indexOf(\"touch\");\n    }\n\n    i.default = n;\n\n    var r = function (t, i) {\n      this.x = t, this.y = i;\n    },\n        s = function () {\n      function t() {}\n\n      return t.fromObj = function (i) {\n        var e = new t();\n        return e.points = i.points, e.width = i.size, e.color = i.color, e.cap = i.cap, e.join = i.join, e.miterLimit = i.miterLimit, e;\n      }, t.prototype.toObj = function () {\n        return {\n          points: this.points,\n          size: this.width,\n          color: this.color,\n          cap: this.cap,\n          join: this.join,\n          miterLimit: this.miterLimit\n        };\n      }, t;\n    }();\n  }]).default;\n});","map":{"version":3,"sources":["webpack://Sketchpad/webpack/universalModuleDefinition","webpack://Sketchpad/webpack/bootstrap","webpack://Sketchpad/src/sketchpad.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Sketchpad","el","opts","this","sketching","_strokes","undoneStrokes","readOnly","aspectRatio","lineWidth","lineColor","lineCap","lineJoin","lineMiterLimit","Error","setOptions","canvas","document","createElement","ctx","getContext","width","clientWidth","height","setCanvasSize","appendChild","length","redraw","listen","map","toObj","configurable","backgroundColor","line","size","color","cap","join","miterLimit","toJSON","strokes","loadJSON","data","strokeObjs","Stroke","fromObj","toDataURL","type","setAttribute","toString","style","getCanvasSize","setLineWidth","setLineSize","setLineColor","setReadOnly","undo","push","pop","redo","clear","drawLine","start","end","lineOpts","getPointRelativeToCanvas","Point","x","y","pushStroke","resize","point","getLineSizeRelativeToCanvas","_a","_b","_c","_d","_e","_f","onDrawEnd","getCursorRelativeToCanvas","e","rect","getBoundingClientRect","isTouchEvent","touchEvent","touches","clientX","left","clientY","top","mouseEvent","normalizePoint","getLineWidthRelativeToCanvas","normalizeLineWidth","clearCanvas","clearRect","fillStyle","fillRect","drawStroke","stroke","points","beginPath","moveTo","lineTo","closePath","strokeStyle","pushPoint","_this","forEach","addEventListener","startStrokeHandler","drawStrokeHandler","endStrokeHandler","preventDefault","default","indexOf"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"responsive-sketchpad\"] = factory();\n\telse\n\t\troot[\"Sketchpad\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Sketchpad = /** @class */ (function () {\n    function Sketchpad(el, opts) {\n        this.sketching = false;\n        this._strokes = []; // v2.0 - Rename to strokes\n        this.undoneStrokes = [];\n        this.readOnly = false;\n        this.aspectRatio = 1; // v2.0 - Remove; rely on canvas as source-of-truth\n        this.lineWidth = 5;\n        this.lineColor = '#000';\n        this.lineCap = 'round';\n        this.lineJoin = 'round';\n        this.lineMiterLimit = 10;\n        if (el == null) {\n            throw new Error('Must pass in a container element');\n        }\n        if (opts != null) {\n            this.setOptions(opts);\n        }\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        var width = (opts === null || opts === void 0 ? void 0 : opts.width) || el.clientWidth;\n        var height = (opts === null || opts === void 0 ? void 0 : opts.height) || width * this.aspectRatio;\n        this.setCanvasSize(width, height);\n        el.appendChild(this.canvas);\n        if (this._strokes.length > 0) {\n            this.redraw();\n        }\n        this.listen();\n    }\n    Object.defineProperty(Sketchpad.prototype, \"strokes\", {\n        // v2.0 - Remove; rename `_strokes`\n        get: function () {\n            return this._strokes.map(function (s) { return s.toObj(); });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sketchpad.prototype, \"undos\", {\n        // v2.0 - Remove\n        get: function () {\n            return this.undoneStrokes.map(function (s) { return s.toObj(); });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sketchpad.prototype, \"opts\", {\n        // v2.0 - Remove\n        get: function () {\n            return {\n                backgroundColor: this.backgroundColor,\n                readOnly: this.readOnly,\n                width: this.canvas.width,\n                height: this.canvas.height,\n                aspectRatio: this.canvas.width / this.canvas.height,\n                line: {\n                    size: this.lineWidth,\n                    color: this.lineColor,\n                    cap: this.lineCap,\n                    join: this.lineJoin,\n                    miterLimit: this.lineMiterLimit,\n                },\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Convert the sketchpad to a JSON object that can be loaded into\n    // other sketchpads or stored on a server\n    Sketchpad.prototype.toJSON = function () {\n        return {\n            aspectRatio: this.canvas.width / this.canvas.height,\n            strokes: this.strokes,\n        };\n    };\n    // Load a json object into the sketchpad\n    Sketchpad.prototype.loadJSON = function (data) {\n        var strokeObjs = data.strokes || [];\n        this._strokes = strokeObjs.map(function (s) { return Stroke.fromObj(s); });\n        this.redraw();\n    };\n    // Converts to image File\n    Sketchpad.prototype.toDataURL = function (type) {\n        return this.canvas.toDataURL(type);\n    };\n    // Set the size of canvas\n    Sketchpad.prototype.setCanvasSize = function (width, height) {\n        this.canvas.setAttribute('width', width.toString());\n        this.canvas.setAttribute('height', height.toString());\n        this.canvas.style.width = width + 'px';\n        this.canvas.style.height = height + 'px';\n    };\n    // Get the size of the canvas\n    Sketchpad.prototype.getCanvasSize = function () {\n        return {\n            width: this.canvas.width,\n            height: this.canvas.height,\n        };\n    };\n    // Set the line width\n    Sketchpad.prototype.setLineWidth = function (width) {\n        this.lineWidth = width;\n    };\n    // Set the line width\n    Sketchpad.prototype.setLineSize = function (size) {\n        this.lineWidth = size;\n    };\n    // Set the line color\n    Sketchpad.prototype.setLineColor = function (color) {\n        this.lineColor = color;\n    };\n    // Set whether or not new strokes can be drawn on the canvas\n    Sketchpad.prototype.setReadOnly = function (readOnly) {\n        this.readOnly = readOnly;\n    };\n    // Undo the last stroke\n    Sketchpad.prototype.undo = function () {\n        if (this._strokes.length === 0) {\n            return;\n        }\n        this.undoneStrokes.push(this._strokes.pop());\n        this.redraw();\n    };\n    // Redo the last undone stroke\n    Sketchpad.prototype.redo = function () {\n        if (this.undoneStrokes.length === 0) {\n            return;\n        }\n        this._strokes.push(this.undoneStrokes.pop());\n        this.redraw();\n    };\n    // Clear the sketchpad\n    Sketchpad.prototype.clear = function () {\n        this.undoneStrokes = [];\n        this._strokes = [];\n        this.redraw();\n    };\n    // Draw a straight line\n    Sketchpad.prototype.drawLine = function (start, end, lineOpts) {\n        this.setOptions({ line: lineOpts });\n        start = this.getPointRelativeToCanvas(new Point(start.x, start.y));\n        end = this.getPointRelativeToCanvas(new Point(end.x, end.y));\n        this.pushStroke([start, end]);\n        this.redraw();\n    };\n    // Resize the canvas maintaining original aspect ratio\n    Sketchpad.prototype.resize = function (width) {\n        var height = width * this.aspectRatio;\n        this.lineWidth = this.lineWidth * (width / this.canvas.width);\n        this.setCanvasSize(width, height);\n        this.redraw();\n    };\n    // Returns a points x,y locations relative to the size of the canvas\n    Sketchpad.prototype.getPointRelativeToCanvas = function (point) {\n        return {\n            x: point.x / this.canvas.width,\n            y: point.y / this.canvas.height,\n        };\n    };\n    //  Get the line size relative to the size of the canvas\n    Sketchpad.prototype.getLineSizeRelativeToCanvas = function (width) {\n        return width / this.canvas.width;\n    };\n    Sketchpad.prototype.setOptions = function (opts) {\n        var _a, _b, _c, _d, _e, _f;\n        if (opts.backgroundColor) {\n            this.backgroundColor = opts.backgroundColor;\n        }\n        if ((_a = opts.line) === null || _a === void 0 ? void 0 : _a.size) {\n            this.lineWidth = opts.line.size;\n        }\n        if ((_b = opts.line) === null || _b === void 0 ? void 0 : _b.cap) {\n            this.lineCap = opts.line.cap;\n        }\n        if ((_c = opts.line) === null || _c === void 0 ? void 0 : _c.join) {\n            this.lineJoin = opts.line.join;\n        }\n        if ((_d = opts.line) === null || _d === void 0 ? void 0 : _d.miterLimit) {\n            this.lineMiterLimit = opts.line.miterLimit;\n        }\n        if (opts.aspectRatio) {\n            this.aspectRatio = opts.aspectRatio;\n        }\n        if (opts.data) {\n            this._strokes = (_f = (_e = opts.data.strokes) === null || _e === void 0 ? void 0 : _e.map(function (s) { return Stroke.fromObj(s); })) !== null && _f !== void 0 ? _f : [];\n        }\n        if (opts.onDrawEnd) {\n            this.onDrawEnd = opts.onDrawEnd;\n        }\n    };\n    // For a given event, get the point at which the event occurred\n    // relative to the canvas\n    Sketchpad.prototype.getCursorRelativeToCanvas = function (e) {\n        var point;\n        var rect = this.canvas.getBoundingClientRect();\n        if (isTouchEvent(e)) {\n            var touchEvent = e;\n            point = new Point(touchEvent.touches[0].clientX - rect.left, touchEvent.touches[0].clientY - rect.top);\n        }\n        else {\n            var mouseEvent = e;\n            point = new Point(mouseEvent.clientX - rect.left, mouseEvent.clientY - rect.top);\n        }\n        return new Point(point.x / this.canvas.width, point.y / this.canvas.height);\n    };\n    Sketchpad.prototype.normalizePoint = function (p) {\n        return new Point(p.x * this.canvas.width, p.y * this.canvas.height);\n    };\n    Sketchpad.prototype.getLineWidthRelativeToCanvas = function (size) {\n        return size / this.canvas.width;\n    };\n    Sketchpad.prototype.normalizeLineWidth = function (width) {\n        return width * this.canvas.width;\n    };\n    // Erase the entire canvas\n    Sketchpad.prototype.clearCanvas = function () {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        if (this.backgroundColor) {\n            this.ctx.fillStyle = this.backgroundColor;\n            this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n    };\n    // Draw a single stroke\n    Sketchpad.prototype.drawStroke = function (stroke) {\n        if (stroke.points == null)\n            return;\n        this.ctx.beginPath();\n        for (var i = 0; i < stroke.points.length - 1; i++) {\n            var start = this.normalizePoint(stroke.points[i]);\n            var end = this.normalizePoint(stroke.points[i + 1]);\n            this.ctx.moveTo(start.x, start.y);\n            this.ctx.lineTo(end.x, end.y);\n        }\n        this.ctx.closePath();\n        if (stroke.color) {\n            this.ctx.strokeStyle = stroke.color;\n        }\n        if (stroke.width) {\n            this.ctx.lineWidth = this.normalizeLineWidth(stroke.width);\n        }\n        if (stroke.join) {\n            this.ctx.lineJoin = stroke.join;\n        }\n        if (stroke.cap) {\n            this.ctx.lineCap = stroke.cap;\n        }\n        if (stroke.miterLimit) {\n            this.ctx.miterLimit = stroke.miterLimit;\n        }\n        this.ctx.stroke();\n    };\n    Sketchpad.prototype.pushStroke = function (points) {\n        this._strokes.push(Stroke.fromObj({\n            points: points,\n            size: this.getLineWidthRelativeToCanvas(this.lineWidth),\n            color: this.lineColor,\n            cap: this.lineCap,\n            join: this.lineJoin,\n            miterLimit: this.lineMiterLimit,\n        }));\n    };\n    Sketchpad.prototype.pushPoint = function (point) {\n        var stroke = this._strokes[this._strokes.length - 1];\n        if (stroke.points) {\n            stroke.points.push(point);\n        }\n    };\n    // Redraw the whole canvas\n    Sketchpad.prototype.redraw = function () {\n        var _this = this;\n        this.clearCanvas();\n        this._strokes.forEach(function (s) { return _this.drawStroke(s); });\n    };\n    Sketchpad.prototype.listen = function () {\n        var _this = this;\n        ['mousedown', 'touchstart'].forEach(function (name) {\n            return _this.canvas.addEventListener(name, function (e) { return _this.startStrokeHandler(e); });\n        });\n        ['mousemove', 'touchmove'].forEach(function (name) { return _this.canvas.addEventListener(name, function (e) { return _this.drawStrokeHandler(e); }); });\n        ['mouseup', 'mouseleave', 'touchend'].forEach(function (name) {\n            return _this.canvas.addEventListener(name, function (e) { return _this.endStrokeHandler(e); });\n        });\n    };\n    Sketchpad.prototype.startStrokeHandler = function (e) {\n        e.preventDefault();\n        if (this.readOnly) {\n            return;\n        }\n        this.sketching = true;\n        var point = this.getCursorRelativeToCanvas(e);\n        this.pushStroke([point]);\n        this.redraw();\n    };\n    Sketchpad.prototype.drawStrokeHandler = function (e) {\n        e.preventDefault();\n        if (!this.sketching)\n            return;\n        var point = this.getCursorRelativeToCanvas(e);\n        this.pushPoint(point);\n        this.redraw();\n    };\n    Sketchpad.prototype.endStrokeHandler = function (e) {\n        e.preventDefault();\n        if (!this.sketching)\n            return;\n        this.sketching = false;\n        if (isTouchEvent(e)) {\n            return; // touchend events do not have a position\n        }\n        var point = this.getCursorRelativeToCanvas(e);\n        this.pushPoint(point);\n        this.redraw();\n        if (this.onDrawEnd) {\n            this.onDrawEnd();\n        }\n    };\n    return Sketchpad;\n}());\nexports.default = Sketchpad;\nfunction isTouchEvent(e) {\n    return e.type.indexOf('touch') !== -1; // v2.0 - Switch to startsWith\n}\nvar Point = /** @class */ (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return Point;\n}());\nvar Stroke = /** @class */ (function () {\n    function Stroke() {\n    }\n    Stroke.fromObj = function (s) {\n        var stroke = new Stroke();\n        stroke.points = s.points;\n        stroke.width = s.size;\n        stroke.color = s.color;\n        stroke.cap = s.cap;\n        stroke.join = s.join;\n        stroke.miterLimit = s.miterLimit;\n        return stroke;\n    };\n    Stroke.prototype.toObj = function () {\n        return {\n            points: this.points,\n            size: this.width,\n            color: this.color,\n            cap: this.cap,\n            join: this.join,\n            miterLimit: this.miterLimit,\n        };\n    };\n    return Stroke;\n}());\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}